<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Lesson Title: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css">
<script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="favicons/incubator/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicons/incubator/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicons/incubator/favicon-16x16.png">
<link rel="manifest" href="favicons/incubator/site.webmanifest">
<link rel="mask-icon" href="favicons/incubator/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="Lesson Description" src="assets/images/incubator-logo.svg"><span class="badge text-bg-danger">
          <abbr title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.">
            <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#early-development-pre-alpha-through-alpha" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alpha
            </a>
            <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/aio.html';">Instructor View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Lesson Description" src="assets/images/incubator-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Lesson Title
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Lesson Title
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Lesson Title
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/aio.html">Instructor View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-introduction.html">1. Introduction to Darwin Core</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-break.html">2. Social Break</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-data-cleaning.html">3. Data Cleaning</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="reference.html">Reference</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-01-introduction"><p>Content from <a href="01-introduction.html">Introduction to Darwin Core</a></p>
<hr>
<p>Last updated on 2024-12-19 |

        <a href="https://github.com/carpentries/workbench-template-md/edit/main/episodes/01-introduction.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="section level1">
<h1 id="darwin-core---a-global-community-of-data-sharing-and-integration">Darwin Core - A global community of data sharing and
integration<a class="anchor" aria-label="anchor" href="#darwin-core---a-global-community-of-data-sharing-and-integration"></a>
</h1>
<p>Darwin Core is a data standard to mobilize and share biodiversity
data. Over the years, the Darwin Core standard has expanded to enable
exchange and sharing of diverse types of biological observations from
citizen scientists, ecological monitoring, eDNA, animal telemetry,
taxonomic treatments, and many others. Darwin Core is applicable to any
observation of an organism (scientific name, OTU, or other methods of
defining a species) at a particular place and time. In Darwin Core this
is an <code>occurrence</code>. To learn more about the foundations of
Darwin Core read <a href="https://doi.org/10.1371/journal.pone.0029715" class="external-link">Wieczorek et
al. 2012</a>.</p>
<div class="section level3">
<h3 id="demonstrated-use-of-darwin-core">Demonstrated Use of Darwin Core<a class="anchor" aria-label="anchor" href="#demonstrated-use-of-darwin-core"></a>
</h3>
<p>The power of Darwin Core is most evident in the data aggregators that
harvest data using that standard. The one we will refer to most
frequently in this workshop is the <a href="https://obis.org/" class="external-link">Ocean
Biodiversity Information System</a> (learn more about <a href="https://youtu.be/E6NblAC-1uE" class="external-link">OBIS</a>). Another prominent one is
the <a href="https://www.gbif.org/" class="external-link">Global Biodiversity Information
Facility</a> (learn more about <a href="https://vimeo.com/434831655" class="external-link">GBIF</a>). It’s also used by the
Atlas of Living Australia, iDigBio, among others.</p>
</div>
<div class="section level3">
<h3 id="darwin-core-archives">Darwin Core Archives<a class="anchor" aria-label="anchor" href="#darwin-core-archives"></a>
</h3>
<p>Darwin Core Archives are what OBIS and GBIF harvest into their
systems. Fortunately the software created and maintained by GBIF, the <a href="https://www.gbif.org/ipt" class="external-link">Integrated Publishing Toolkit</a>,
produces Darwin Core Archives for us. Darwin Core Archives are pretty
simple. It’s a zipped folder containing the data (one or several files
depending on how many extensions you use), an Ecological Metadata
Language (EML) XML file, and a meta.xml file that describes what’s in
the zipped folder.</p>
<div id="challenge" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge" class="callout-inner">
<h3 class="callout-title">Challenge</h3>
<div class="callout-content">
<p>Download this <a href="https://ipt-obis.gbif.us/archive.do?r=tpwd_harc_texasaransasbay_bagseine&amp;v=2.3" class="external-link">Darwin
Core Archive</a> and examine what’s in it. Did you find anything unusual
or that you don’t understand what it is?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<pre class="folder"><code>dwca-tpwd_harc_texasaransasbay_bagseine-v2.3
 |-- eml.xml
 |-- event.txt
 |-- extendedmeasurementorfact.txt
 |-- meta.xml
 |-- occurrence.txt</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="darwin-core-mapping">Darwin Core Mapping<a class="anchor" aria-label="anchor" href="#darwin-core-mapping"></a>
</h3>
<p>Now that we understand a bit more about why Darwin Core was created
and how it is used today we can begin the work of mapping data to the
standard. The key resource when mapping data to Darwin Core is the <a href="https://dwc.tdwg.org/terms/" class="external-link">Darwin Core Quick Reference
Guide</a>. This document provides an easy-to-read reference of the
currently recommended terms for the Darwin Core standard. There are a
lot of terms there and you won’t use them all for every dataset (or even
use them all on any dataset) but as you apply the standard to more
datasets you’ll become more familiar with the terms.</p>
<div id="tip" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip" class="callout-inner">
<h3 class="callout-title">
<span class="emoji" data-emoji="pushpin">📌</span> Tip</h3>
<div class="callout-content">
<p>If your raw column headers are Darwin Core terms verbatim then you
can skip this step! Next time you plan data collection use the standard
DwC term headers!</p>
</div>
</div>
</div>
<div id="challenge-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-1" class="callout-inner">
<h3 class="callout-title">Challenge</h3>
<div class="callout-content">
<p>Find the matching Darwin Core term for these column headers.</p>
<ol style="list-style-type: decimal">
<li>SAMPLE_DATE (example data: 09-MAR-21 05.45.00.000000000 PM)</li>
<li>lat (example data: 32.6560)</li>
<li>depth_m (example data: 6 meters)</li>
<li>COMMON_NAME (example data: staghorn coral)</li>
<li>percent_cover (example data: 15)</li>
<li>COUNT (example data: 2 Females)</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li><a href="https://dwc.tdwg.org/terms/#dwc:eventDate" class="external-link"><code>eventDate</code></a></li>
<li><a href="https://dwc.tdwg.org/terms/#dwc:decimalLatitude" class="external-link"><code>decimalLatitude</code></a></li>
<li>
<a href="https://dwc.tdwg.org/terms/#dwc:minimumDepthInMeters" class="external-link"><code>minimumDepthInMeters</code></a>
and <a href="https://dwc.tdwg.org/terms/#dwc:maximumDepthInMeters" class="external-link"><code>maximumDepthInMeters</code></a>
</li>
<li><a href="https://dwc.tdwg.org/terms/#dwc:vernacularName" class="external-link"><code>vernacularName</code></a></li>
<li>
<a href="https://dwc.tdwg.org/terms/#dwc:organismQuantity" class="external-link"><code>organismQuantity</code></a>
and <a href="https://dwc.tdwg.org/terms/#dwc:organismQuantityType" class="external-link"><code>organismQuantityType</code></a>
</li>
<li>This one is tricky- it’s two terms combined and will need to be
split. <a href="https://dwc.tdwg.org/terms/#dwc:individualCount" class="external-link"><code>indvidualCount</code></a>
and <a href="https://dwc.tdwg.org/terms/#dwc:sex" class="external-link"><code>sex</code></a>
</li>
</ol>
</div>
</div>
</div>
</div>
<div id="tip-1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-1" class="callout-inner">
<h3 class="callout-title">
<span class="emoji" data-emoji="pushpin">📌</span> Tip</h3>
<div class="callout-content">
<p>To make the mapping step easier on yourself, we recommend starting a
mapping document/spreadsheet (or document it as a comment in your
script). List out all of your column headers in one column and document
the appropriate Dawin Core term(s) in a second column. For example:</p>
<table class="table">
<thead><tr class="header">
<th>my term</th>
<th>DwC term</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>lat</td>
<td>decimalLatitude</td>
</tr>
<tr class="even">
<td>date</td>
<td>eventDate</td>
</tr>
<tr class="odd">
<td>species</td>
<td>scientificName</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="what-are-the-required-darwin-core-terms-for-publishing-to-obis">What are the <strong>required</strong> Darwin Core terms for
publishing to OBIS?<a class="anchor" aria-label="anchor" href="#what-are-the-required-darwin-core-terms-for-publishing-to-obis"></a>
</h3>
<p>When doing your mapping some required information may be missing.
Below are the Darwin Core terms that are required to share your data to
OBIS plus a few that are needed for GBIF.</p>
<table class="table">
<colgroup>
<col width="16%">
<col width="32%">
<col width="35%">
<col width="15%">
</colgroup>
<thead><tr class="header">
<th>Darwin Core Term</th>
<th>Definition</th>
<th>Comment</th>
<th>Example</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/terms/#dwc:occurrenceID" class="external-link"><code>occurrenceID</code></a></td>
<td>An identifier for the Occurrence (as opposed to a particular digital
record of the occurrence). In the absence of a persistent global unique
identifier, construct one from a combination of identifiers in the
record that will most closely make the occurrenceID globally
unique.</td>
<td>To construct a globally unique identifier for each occurrence you
can usually concatenate station + date + scientific name (or something
similar) but you’ll need to check this is unique for each row in your
data. It is preferred to use the fields that are least likely to change
in the future for this. For ways to check the uniqueness of your
occurrenceIDs see the <a href="%7B%7B%20page.root%20%7D%7D/06-qa-qc/index.html">QA / QC</a>
section of the workshop.</td>
<td>Station_95_Date_09JAN1997:14:35:00.000_Atractosteus_spatula</td>
</tr>
<tr class="even">
<td><a href="https://dwc.tdwg.org/terms/#dwc:basisOfRecord" class="external-link"><code>basisOfRecord</code></a></td>
<td>The specific nature of the data record.</td>
<td>Pick from these controlled vocabulary terms: <a href="http://rs.tdwg.org/dwc/terms/HumanObservation" class="external-link">HumanObservation</a>,
<a href="http://rs.tdwg.org/dwc/terms/MachineObservation" class="external-link">MachineObservation</a>,
<a href="http://rs.tdwg.org/dwc/terms/MaterialSample" class="external-link">MaterialSample</a>,
<a href="http://rs.tdwg.org/dwc/terms/PreservedSpecimen" class="external-link">PreservedSpecimen</a>,
<a href="http://rs.tdwg.org/dwc/terms/LivingSpecimen" class="external-link">LivingSpecimen</a>,
<a href="http://rs.tdwg.org/dwc/terms/FossilSpecimen" class="external-link">FossilSpecimen</a>,
<a href="http://rs.tdwg.org/dwc/terms/MaterialEntity" class="external-link">MaterialEntity</a>,
<a href="http://rs.tdwg.org/dwc/terms/Event" class="external-link">Event</a>, <a href="http://rs.tdwg.org/dwc/terms/Taxon" class="external-link">Taxon</a>, <a href="http://rs.tdwg.org/dwc/terms/Occurrence" class="external-link">Occurrence</a>, <a href="http://rs.tdwg.org/dwc/terms/MaterialCitation" class="external-link">MaterialCitation</a>
</td>
<td>HumanObservation</td>
</tr>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/terms/#dwc:scientificName" class="external-link"><code>scientificName</code></a></td>
<td>The full scientific name, with authorship and date information if
known. When forming part of an Identification, this should be the name
in lowest level taxonomic rank that can be determined. This term should
not contain identification qualifications, which should instead be
supplied in the <code>identificationQualifier</code> term.</td>
<td>Note that cf., aff., etc. need to be parsed out to the
<code>identificationQualifier</code> term. For a more thorough review of
<code>identificationQualifier</code> see <a href="https://doi.org/10.3389/fmars.2021.620702" class="external-link">this paper</a>.</td>
<td>Atractosteus spatula</td>
</tr>
<tr class="even">
<td><a href="https://dwc.tdwg.org/terms/#dwc:scientificNameID" class="external-link"><code>scientificNameID</code></a></td>
<td>An identifier for the nomenclatural (not taxonomic) details of a
scientific name.</td>
<td>Must be a WoRMS LSID for sharing to OBIS. Note that the numbers at
the end are the AphiaID from WoRMS.</td>
<td><a href="urn:lsid:marinespecies.org:taxname:218214" class="uri">urn:lsid:marinespecies.org:taxname:218214</a></td>
</tr>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/terms/#dwc:eventDate" class="external-link"><code>eventDate</code></a></td>
<td>The date-time or interval during which an Event occurred. For
occurrences, this is the date-time when the event was recorded. Not
suitable for a time in a geological context.</td>
<td>Must follow <a href="https://en.wikipedia.org/wiki/ISO_8601" class="external-link">ISO
8601</a>. See more information on dates in the <a href="%7B%7B%20page.root%20%7D%7D/03-data-cleaning/index.html">Data
Cleaning</a> section of the workshop.</td>
<td>2009-02-20T08:40Z</td>
</tr>
<tr class="even">
<td><a href="https://dwc.tdwg.org/terms/#dwc:decimalLatitude" class="external-link"><code>decimalLatitude</code></a></td>
<td>The geographic latitude (in decimal degrees, using the spatial
reference system given in geodeticDatum) of the geographic center of a
Location. Positive values are north of the Equator, negative values are
south of it. Legal values lie between -90 and 90, inclusive.</td>
<td>For OBIS and GBIF the required <code>geodeticDatum</code> is WGS84.
Uncertainty around the geographic center of a Location (e.g. when
sampling event was a transect) can be recorded in
<code>coordinateUncertaintyInMeters</code>. See more information on
coordinates in the <a href="%7B%7B%20page.root%20%7D%7D/03-data-cleaning/index.html">Data
Cleaning</a> section of the workshop.</td>
<td>-41.0983423</td>
</tr>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/terms/#dwc:decimalLongitude" class="external-link"><code>decimalLongitude</code></a></td>
<td>The geographic longitude (in decimal degrees, using the spatial
reference system given in geodeticDatum) of the geographic center of a
Location. Positive values are east of the Greenwich Meridian, negative
values are west of it. Legal values lie between -180 and 180,
inclusive</td>
<td>For OBIS and GBIF the required <code>geodeticDatum</code> is WGS84.
See more information on coordinates in the <a href="%7B%7B%20page.root%20%7D%7D/03-data-cleaning/index.html">Data
Cleaning</a> section of the workshop.</td>
<td>-121.1761111</td>
</tr>
<tr class="even">
<td><a href="https://dwc.tdwg.org/terms/#dwc:occurrenceStatus" class="external-link"><code>occurrenceStatus</code></a></td>
<td>A statement about the presence or absence of a Taxon at a
Location.</td>
<td>For OBIS, only valid values are <code>present</code> and
<code>absent</code>.</td>
<td>present</td>
</tr>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/terms/#dwc:countryCode" class="external-link"><code>countryCode</code></a></td>
<td>The standard code for the country in which the location occurs.</td>
<td>Use an <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2" class="external-link">ISO
3166-1-alpha-2</a> country code. Not required for OBIS but GBIF prefers
to have this for their system. For international waters, leave
blank.</td>
<td>US, MX, CA</td>
</tr>
<tr class="even">
<td><a href="https://dwc.tdwg.org/terms/#dwc:kingdom" class="external-link"><code>kingdom</code></a></td>
<td>The full scientific name of the kingdom in which the taxon is
classified.</td>
<td>Not required for OBIS but GBIF needs this to disambiguate scientific
names that are the same but in different kingdoms.</td>
<td>Animalia</td>
</tr>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/terms/#dwciri:geodeticDatum" class="external-link"><code>geodeticDatum</code></a></td>
<td>The ellipsoid, geodetic datum, or spatial reference system (SRS)
upon which the geographic coordinates given in decimalLatitude and
decimalLongitude as based.</td>
<td>Must be <a href="https://epsg.io/4326" class="external-link">WGS84</a> for data shared to
OBIS and GBIF but it’s best to state explicitly that it is.</td>
<td>WGS84</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="what-other-terms-should-be-considered">What other terms should be considered?<a class="anchor" aria-label="anchor" href="#what-other-terms-should-be-considered"></a>
</h3>
<p>While these terms are not required for publishing data to OBIS, they
are extremely helpful for downstream users because without them the data
are less useful for future analyses. For instance, <code>depth</code> is
a crucial piece of information for marine observations, but it is not
always included. For the most part the ones listed below are not going
to be sitting there in the data, so you’ll have to determine what the
values should be and add them in. Really try your hardest to include
them if you can.</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="18%">
<col width="37%">
<col width="41%">
<col width="2%">
</colgroup>
<thead><tr class="header">
<th>Darwin Core Term</th>
<th>Definition</th>
<th>Comment</th>
<th>Example</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/terms/#dwc:minimumDepthInMeters" class="external-link"><code>minimumDepthInMeters</code></a></td>
<td>The lesser depth of a range of depth below the local surface, in
meters.</td>
<td>There isn’t a single depth value so even if you have a single value
you’ll put that in both minimum and maximum depth fields.</td>
<td>0.1</td>
</tr>
<tr class="even">
<td><a href="https://dwc.tdwg.org/terms/#dwc:maximumDepthInMeters" class="external-link"><code>maximumDepthInMeters</code></a></td>
<td>The greater depth of a range of depth below the local surface, in
meters.</td>
<td>For observations above sea level consider using <a href="https://dwc.tdwg.org/terms/#dwc:minimumDistanceAboveSurfaceInMeters" class="external-link"><code>minimumDistanceAboveSurfaceInMeters</code></a>
and <a href="https://dwc.tdwg.org/terms/#dwc:maximumDistanceAboveSurfaceInMeters" class="external-link"><code>maximumDistanceAboveSurfaceInMeters</code></a>
</td>
<td>10.5</td>
</tr>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/terms/#dwc:coordinateUncertaintyInMeters" class="external-link"><code>coordinateUncertaintyInMeters</code></a></td>
<td>The horizontal distance (in meters) from the given decimalLatitude
and decimalLongitude describing the smallest circle containing the whole
of the Location. Leave the value empty if the uncertainty is unknown,
cannot be estimated, or is not applicable (because there are no
coordinates). Zero is not a valid value for this term</td>
<td>There’s always uncertainty associated with locations. Recording the
uncertainty is crucial for downstream analyses.</td>
<td>15</td>
</tr>
<tr class="even">
<td><a href="https://dwc.tdwg.org/terms/#dwc:samplingProtocol" class="external-link"><code>samplingProtocol</code></a></td>
<td>The names of, references to, or descriptions of the methods or
protocols used during an Event.</td>
<td></td>
<td>Bag Seine</td>
</tr>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/terms/#dwc:taxonRank" class="external-link"><code>taxonRank</code></a></td>
<td>The taxonomic rank of the most specific name in the
scientificName.</td>
<td>Also helps with disambiguation of scientific names.</td>
<td>Species</td>
</tr>
<tr class="even">
<td><a href="https://dwc.tdwg.org/terms/#dwc:organismQuantity" class="external-link"><code>organismQuantity</code></a></td>
<td>A number or enumeration value for the quantity of organisms.</td>
<td>OBIS also likes to see this in the Extended Measurement or Fact
extension.</td>
<td>2.6</td>
</tr>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/terms/#dwc:organismQuantityType" class="external-link"><code>organismQuantityType</code></a></td>
<td>The type of quantification system used for the quantity of
organisms.</td>
<td></td>
<td>Relative Abundance</td>
</tr>
<tr class="even">
<td><a href="https://dwc.tdwg.org/terms/#dwc:datasetName" class="external-link"><code>datasetName</code></a></td>
<td>The name identifying the data set from which the record was
derived.</td>
<td></td>
<td>TPWD HARC Texas Coastal Fisheries Aransas Bag Bay Seine</td>
</tr>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/terms/#dwc:dataGeneralizations" class="external-link"><code>dataGeneralizations</code></a></td>
<td>Actions taken to make the shared data less specific or complete than
in its original form. Suggests that alternative data of higher quality
may be available on request.</td>
<td>This veers somewhat into the realm of metadata and will not be
applicable to all datasets but if the data were modified such as due to
sensitive species then it’s important to note that for future
users.</td>
<td>Coordinates generalized from original GPS coordinates to the nearest
half degree grid cell</td>
</tr>
<tr class="even">
<td><a href="https://dwc.tdwg.org/terms/#dwc:informationWithheld" class="external-link"><code>informationWithheld</code></a></td>
<td>Additional information that exists, but that has not been shared in
the given record.</td>
<td>Also useful if the data have been modified this way for sensitive
species or for other reasons.</td>
<td>location information not given for endangered species</td>
</tr>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/terms/#dwc:institutionCode" class="external-link"><code>institutionCode</code></a></td>
<td>The name (or acronym) in use by the institution having custody of
the object(s) or information referred to in the record.</td>
<td></td>
<td>TPWD</td>
</tr>
</tbody>
</table>
<p>Other than these specific terms, work through the data that you have
and try to crosswalk it to the Darwin Core terms that match best.</p>
<div id="exercise" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="exercise" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>Create some crosswalk notes for your dataset.</p>
<p>Compare your data files to the table(s) above to devise a plan to
crosswalk your data columns into the DwC terms.</p>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</div></section><section id="aio-02-break"><p>Content from <a href="02-break.html">Social Break</a></p>
<hr>
<p>Last updated on 2024-12-18 |

        <a href="https://github.com/carpentries/workbench-template-md/edit/main/episodes/02-break.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<p><img src="https://imgs.xkcd.com/comics/standards_2x.png" alt="xkcd 0927 (standards)" class="figure"><em>Image credit: <a href="https://xkcd.com/" class="external-link">xkcd</a></em></p></section><section id="aio-03-data-cleaning"><p>Content from <a href="03-data-cleaning.html">Data Cleaning</a></p>
<hr>
<p>Last updated on 2024-12-18 |

        <a href="https://github.com/carpentries/workbench-template-md/edit/main/episodes/03-data-cleaning.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<p>Now that you know what the mapping is between your raw data and the
Darwin Core standard, it’s time to start cleaning up the data to align
with the conventions described in the standard. The following activities
are the three most common conversions a dataset will undergo to align to
the Darwin Core standard: 1. <a href="#getting-your-dates-in-order">Ensuring dates follow the ISO 8601
standard</a> 2. <a href="#matching-your-scientific-names-to-worms">Matching scientific
names to an authoritative resource</a> 3. <a href="#getting-latlon-to-decimal-degrees">Ensuring latitude and
longitude values are in decimal degrees</a></p>
<p>Below is a short summary of each of those conversions as well as some
example conversion scripts. The exercises are intended to give you a
sense of the variability we’ve seen in datasets and how we went about
converting them. While the examples use the <a href="https://pandas.pydata.org/" class="external-link">pandas package for Python</a> and the
<a href="https://www.tidyverse.org/" class="external-link">tidyverse collection of packages
for R</a> (in particular the <a href="https://cloud.r-project.org/web/packages/lubridate/lubridate.pdf" class="external-link">lubridate</a>
package), those are not the only options for dealing with these
conversions but simply the ones we use more frequently in our
experiences.</p>
<div class="section level1">
<h1 id="getting-your-dates-in-order">Getting your dates in order<a class="anchor" aria-label="anchor" href="#getting-your-dates-in-order"></a>
</h1>
<p>Dates can be surprisingly tricky because people record them in many
different ways. For our purposes we must follow <a href="https://en.wikipedia.org/wiki/ISO_8601" class="external-link">ISO 8601</a> which means
using a four digit year, two digit month, and two digit day with dashes
as separators (i.e. <code>YYYY-MM-DD</code>). You can also record time
in ISO 8601 but make sure to include the time zone which can also get
tricky if your data take place across time zones and throughout the year
where daylight savings time may or may not be in effect (and start and
end times of daylight savings vary across years). There are packages in
R and Python that can help you with these vagaries. Finally, it is
possible to record time intervals in ISO 8601 using a slash
(e.g. <code>2022-01-02/2022-01-12</code>). Examine the dates in your
data to determine what format they are following and what amendments
need to be made to ensure they are following ISO 8601. Below are some
examples and solutions in Python and R for them.</p>
<p>ISO 8601 dates can represent moments in time at different
resolutions, as well as time intervals, which use “/” as a separator.
Date and time are separated by “T”. Timestamps can have a time zone
indicator at the end. If not, then they are assumed to be local time.
When a time is UTC, the letter “Z” is added at the end
(e.g. 2009-02-20T08:40Z, which is the equivalent of
2009-02-20T08:40+00:00).</p>
<blockquote>
<h2 id="tip">Tip</h2>
<p>Focus on getting your package of choice to read the dates
appropriately. While you can use <a href="https://en.wikipedia.org/wiki/Regular_expression" class="external-link">regular
expressions</a> to replace and substitute strings to align with the ISO
convention, it will typically save you time if you work in your package
of choice to translate the dates. {: .callout}</p>
</blockquote>
<table class="table">
<colgroup>
<col width="42%">
<col width="30%">
<col width="26%">
</colgroup>
<thead><tr class="header">
<th>Darwin Core Term</th>
<th>Description</th>
<th>Example</th>
</tr></thead>
<tbody><tr class="odd">
<td><a href="https://dwc.tdwg.org/list/#dwc_eventDate" class="external-link">eventDate</a></td>
<td>The date-time or interval during which an Event occurred. For
occurrences, this is the date-time when the event was recorded. Not
suitable for a time in a geological context.</td>
<td>
<code>1963-03-08T14:07-0600</code> (8 Mar 1963 at 2:07pm in the time
zone six hours earlier than UTC).<br><code>2009-02-20T08:40Z</code> (20
February 2009 8:40am UTC).<br><code>2018-08-29T15:19</code> (3:19pm
local time on 29 August 2018).<br><code>1809-02-12</code> (some time
during 12 February 1809).<br><code>1906-06</code> (some time in June
1906).<br><code>1971</code> (some time in the year
1971).<br><code>2007-03-01T13:00:00Z/2008-05-11T15:30:00Z</code> (some
time during the interval between 1 March 2007 1pm UTC and 11 May 2008
3:30pm UTC).<br><code>1900/1909</code> (some time during the interval
between the beginning of the year 1900 and the end of the year
1909).<br><code>2007-11-13/15</code> (some time in the interval between
13 November 2007 and 15 November 2007).</td>
</tr></tbody>
</table>
<blockquote>
<h2 id="examples-in-python">Examples in Python</h2>
<p>When dealing with dates using pandas in Python it is best to create a
Series as your time column with the appropriate datatype. Then, when
writing your file(s) using <a href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.to_csv.html" class="external-link">.to_csv()</a>
you can specify the format which your date will be written in using the
<code>date_format</code> parameter.</p>
<p>The examples below show how to use the <a href="https://pandas.pydata.org/docs/reference/api/pandas.to_datetime.html" class="external-link">pandas.to_datetime()</a>
function to read various date formats. The process can be applied to
entire columns (or Series) within a DataFrame. <br> 1.
<code>01/31/2021 17:00 GMT</code></p>
<p>This date follows a typical date construct of
<code>month</code><strong>/</strong><code>day</code><strong>/</strong><code>year</code>
<code>24-hour</code><strong>:</strong><code>minute</code>
<code>time-zone</code>. The pandas <code>.to_datetime()</code> function
will correctly interpret these dates without the <code>format</code>
parameter.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'date'</span>:[<span class="st">'01/31/2021 17:00 GMT'</span>]})</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>df[<span class="st">'eventDate'</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">'date'</span>], <span class="bu">format</span><span class="op">=</span><span class="st">"%m/</span><span class="sc">%d</span><span class="st">/%Y %H:%M %Z"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>df</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>                   date                 eventDate
   01/31/2021 17:00 GMT 2021-01-31 17:00:00+00:00</code></pre>
</div>
<ol start="2" style="list-style-type: decimal">
<li>
<p><code>31/01/2021 12:00 EST</code></p>
<p>This date is similar to the first date but switches the
<code>month</code> and <code>day</code> and identifies a different
<code>time-zone</code>. The construct looks like
<code>day</code><strong>/</strong><code>month</code><strong>/</strong><code>year</code>
<code>24-hour</code><strong>:</strong><code>minute</code>
<code>time-zone</code></p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'date'</span>:[<span class="st">'31/01/2021 12:00 EST'</span>]})</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>df[<span class="st">'eventDate'</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">'date'</span>], <span class="bu">format</span><span class="op">=</span><span class="st">"</span><span class="sc">%d</span><span class="st">/%m/%Y %H:%M %Z"</span>)</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>df</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>                   date                 eventDate
   31/01/2021 12:00 EST 2021-01-31 12:00:00-05:00</code></pre>
</div>
</li>
<li>
<p><code>January, 01 2021 5:00 PM GMT</code></p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'date'</span>:[<span class="st">'January, 01 2021 5:00 PM GMT'</span>]})</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>df[<span class="st">'eventDate'</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">'date'</span>],<span class="bu">format</span><span class="op">=</span><span class="st">'%B, </span><span class="sc">%d</span><span class="st"> %Y %I:%M %p %Z'</span>)</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>df</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>                           date                 eventDate
   January, 01 2021 5:00 PM GMT 2021-01-01 17:00:00+00:00</code></pre>
</div>
</li>
<li>
<p><code>1612112400</code> in seconds since 1970</p>
<p>This uses the units of <code>seconds since 1970</code> which is
common when working with data in <a href="https://www.unidata.ucar.edu/software/netcdf/" class="external-link">netCDF</a>.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'date'</span>:[<span class="st">'1612112400'</span>]})</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>df[<span class="st">'eventDate'</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">'date'</span>], unit<span class="op">=</span><span class="st">'s'</span>, origin<span class="op">=</span><span class="st">'unix'</span>)</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>df</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>         date           eventDate
   1612112400 2021-01-31 17:00:00</code></pre>
</div>
</li>
<li>
<p><code>44227.708333333333</code></p>
<p>This is the numerical value for dates in Excel because Excel stores
dates as sequential serial numbers so that they can be used in
calculations. In some cases, when you export an Excel spreadsheet to
CSV, the dates are preserved as a floating point number.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'date'</span>:[<span class="st">'44227.708333333333'</span>]})</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>df[<span class="st">'eventDate'</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">'date'</span>].astype(<span class="bu">float</span>), unit<span class="op">=</span><span class="st">'D'</span>, origin<span class="op">=</span><span class="st">'1899-12-30'</span>)</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>df</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>                 date                     eventDate
   44227.708333333333 2021-01-31 17:00:00.000000256</code></pre>
</div>
</li>
<li>
<p>Observations with a start date of <code>2021-01-30</code> and an
end date of <code>2021-01-31</code>.</p>
<p>Here we store the date as a duration following the ISO 8601
convention. In some cases, it is easier to use a regular expression or
simply paste strings together:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'start_date'</span>:[<span class="st">'2021-01-30'</span>],</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>                   <span class="st">'end_date'</span>:[<span class="st">'2021-01-31'</span>]})</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>df[<span class="st">'eventDate'</span>] <span class="op">=</span> df[<span class="st">'start_date'</span>]<span class="op">+</span><span class="st">'/'</span><span class="op">+</span>df[<span class="st">'end_date'</span>]</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>df</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   start_time    end_time              eventDate
   2021-01-30  2021-01-31  2021-01-30/2021-01-31</code></pre>
</div>
</li>
</ol>
<p>{: .solution}</p>
</blockquote>
<blockquote>
<h2 id="examples-in-r">Examples in R</h2>
<p>When dealing with dates using R, there are a few base functions that
are useful to wrangle your dates in the correct format. An R package
that is useful is <a href="https://cran.r-project.org/web/packages/lubridate/lubridate.pdf" class="external-link">lubridate</a>,
which is part of the <code>tidyverse</code>. It is recommended to
bookmark this <a href="https://evoldyn.gitlab.io/evomics-2018/ref-sheets/R_lubridate.pdf" class="external-link">lubridate
cheatsheet</a>.</p>
<p>The examples below show how to use the <code>lubridate</code> package
and format your data to the ISO-8601 standard. <br> 1.
<code>01/31/2021 17:00 GMT</code></p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">lubridate</span><span class="op">)</span></span>
<span><span class="va">date_str</span> <span class="op">&lt;-</span> <span class="st">'01/31/2021 17:00 GMT'</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu">mdy_hm</span><span class="op">(</span><span class="va">date_str</span>,tz<span class="op">=</span><span class="st">"UTC"</span><span class="op">)</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu">format_ISO8601</span><span class="op">(</span><span class="va">date</span><span class="op">)</span> <span class="co"># Separates date and time with a T.</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">paste0</span><span class="op">(</span><span class="va">date</span>, <span class="st">"Z"</span><span class="op">)</span> <span class="co"># Add a Z because time is in UTC.</span></span>
<span><span class="va">date</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "2021-01-31T17:00:00Z"</code></pre>
</div>
<ol start="2" style="list-style-type: decimal">
<li>
<p><code>31/01/2021 12:00 EST</code></p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">lubridate</span><span class="op">)</span></span>
<span><span class="va">date_str</span> <span class="op">&lt;-</span> <span class="st">'31/01/2021 12:00 EST'</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu">dmy_hm</span><span class="op">(</span><span class="va">date_str</span>,tz<span class="op">=</span><span class="st">"EST"</span><span class="op">)</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu">with_tz</span><span class="op">(</span><span class="va">date</span>,tz<span class="op">=</span><span class="st">"UTC"</span><span class="op">)</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu">format_ISO8601</span><span class="op">(</span><span class="va">date</span><span class="op">)</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">paste0</span><span class="op">(</span><span class="va">date</span>, <span class="st">"Z"</span><span class="op">)</span></span>
<span><span class="va">date</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "2021-01-31T17:00:00Z"</code></pre>
</div>
</li>
<li>
<p><code>January, 01 2021 5:00 PM GMT</code></p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">lubridate</span><span class="op">)</span></span>
<span><span class="va">date_str</span> <span class="op">&lt;-</span> <span class="st">'January, 01 2021 5:00 PM GMT'</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu">mdy_hm</span><span class="op">(</span><span class="va">date_str</span>, tz<span class="op">=</span><span class="st">"GMT"</span><span class="op">)</span></span>
<span><span class="fu">lubridate</span><span class="fu">::</span><span class="fu">with_tz</span><span class="op">(</span><span class="va">date</span>,tz<span class="op">=</span><span class="st">"UTC"</span><span class="op">)</span></span>
<span><span class="fu">lubridate</span><span class="fu">::</span><span class="fu">format_ISO8601</span><span class="op">(</span><span class="va">date</span><span class="op">)</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">paste0</span><span class="op">(</span><span class="va">date</span>, <span class="st">"Z"</span><span class="op">)</span></span>
<span><span class="va">date</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "2021-01-01T17:00:00Z"</code></pre>
</div>
</li>
<li>
<p><code>1612112400</code> in seconds since 1970</p>
<p>This uses the units of <code>seconds since 1970</code> which is
common when working with data in <a href="https://www.unidata.ucar.edu/software/netcdf/" class="external-link">netCDF</a>.</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">lubridate</span><span class="op">)</span></span>
<span><span class="va">date_str</span> <span class="op">&lt;-</span> <span class="st">'1612112400'</span></span>
<span><span class="va">date_str</span> <span class="op">&lt;-</span> <span class="fu">as.numeric</span><span class="op">(</span><span class="va">date_str</span><span class="op">)</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu">as_datetime</span><span class="op">(</span><span class="va">date_str</span>, origin <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="va">origin</span>, tz <span class="op">=</span> <span class="st">"UTC"</span><span class="op">)</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu">format_ISO8601</span><span class="op">(</span><span class="va">date</span><span class="op">)</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">paste0</span><span class="op">(</span><span class="va">date</span>, <span class="st">"Z"</span><span class="op">)</span></span>
<span><span class="va">date</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "2021-01-31T17:00:00Z"</code></pre>
</div>
</li>
<li>
<p><code>44227.708333333333</code></p>
<p>This is the numerical value for dates in Excel because Excel stores
dates as sequential serial numbers so that they can be used in
calculations. In some cases, when you export an Excel spreadsheet to
CSV, the dates are preserved as a floating point number.</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">openxlsx</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">lubridate</span><span class="op">)</span></span>
<span><span class="va">date_str</span> <span class="op">&lt;-</span> <span class="fl">44227.708333333333</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">as.Date</span><span class="op">(</span><span class="va">date_str</span>, origin <span class="op">=</span> <span class="st">"1899-12-30"</span><span class="op">)</span> <span class="co"># If you're only interested in the YYYY-MM-DD</span></span>
<span><span class="va">fulldate</span> <span class="op">&lt;-</span> <span class="fu">openxlsx</span><span class="fu">::</span><span class="fu">convertToDateTime</span><span class="op">(</span><span class="va">date_str</span>, tz <span class="op">=</span> <span class="st">"UTC"</span><span class="op">)</span></span>
<span><span class="va">fulldate</span> <span class="op">&lt;-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu">format_ISO8601</span><span class="op">(</span><span class="va">fulldate</span><span class="op">)</span></span>
<span><span class="va">fulldate</span> <span class="op">&lt;-</span> <span class="fu">paste0</span><span class="op">(</span><span class="va">fulldate</span>, <span class="st">"Z"</span><span class="op">)</span></span>
<span><span class="fu">print</span><span class="op">(</span><span class="va">date</span><span class="op">)</span></span>
<span><span class="fu">print</span><span class="op">(</span><span class="va">fulldate</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "2021-01-31"
[1] "2021-01-31T17:00:00Z"</code></pre>
</div>
</li>
<li>
<p>Observations with a start date of <code>2021-01-30</code> and an
end date of <code>2021-01-31</code>. For added complexity, consider
adding in a 4-digit deployment and retrieval time.</p>
<p>Here we store the date as a duration following the ISO 8601
convention. In some cases, it is easier to use a regular expression or
simply paste strings together:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>event_start <span class="ot">&lt;-</span> <span class="st">'2021-01-30'</span></span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a>event_finish <span class="ot">&lt;-</span> <span class="st">'2021-01-31'</span></span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a>deployment_time <span class="ot">&lt;-</span> <span class="dv">1002</span></span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a>retrieval_time <span class="ot">&lt;-</span> <span class="dv">1102</span></span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a><span class="co"># Time is recorded numerically (1037 instead of 10:37), so need to change these columns:</span></span>
<span id="cb23-7"><a href="#cb23-7" tabindex="-1"></a>deployment_time <span class="ot">&lt;-</span> <span class="fu">substr</span>(<span class="fu">as.POSIXct</span>(<span class="fu">sprintf</span>(<span class="st">"%04.0f"</span>, deployment_time), <span class="at">format =</span> <span class="st">"%H%M"</span>), <span class="dv">12</span>, <span class="dv">16</span>)</span>
<span id="cb23-8"><a href="#cb23-8" tabindex="-1"></a>retrieval_time <span class="ot">&lt;-</span> <span class="fu">substr</span>(<span class="fu">as.POSIXct</span>(<span class="fu">sprintf</span>(<span class="st">"%04.0f"</span>, retrieval_time, <span class="at">format =</span> <span class="st">"%H%M"</span>), <span class="dv">12</span>, <span class="dv">16</span>)</span>
<span id="cb23-9"><a href="#cb23-9" tabindex="-1"></a><span class="co"># If you're interested in just pasting the event dates together:</span></span>
<span id="cb23-10"><a href="#cb23-10" tabindex="-1"></a>eventDate <span class="ot">&lt;-</span> <span class="fu">paste</span>(event_start, event_finish, <span class="at">sep =</span> <span class="st">"/"</span>) </span>
<span id="cb23-11"><a href="#cb23-11" tabindex="-1"></a><span class="co"># If you're interested in including the deployment and retrieval times in the eventDate:</span></span>
<span id="cb23-12"><a href="#cb23-12" tabindex="-1"></a>eventDateTime_start <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">format_ISO8601</span>(<span class="fu">as.POSIXct</span>(<span class="fu">paste</span>(event_start, deployment_time), <span class="at">tz =</span> <span class="st">"UTC"</span>))</span>
<span id="cb23-13"><a href="#cb23-13" tabindex="-1"></a>eventDateTime_start <span class="ot">&lt;-</span> <span class="fu">paste0</span>(eventDateTime_start, <span class="st">"Z"</span>)</span>
<span id="cb23-14"><a href="#cb23-14" tabindex="-1"></a>eventDateTime_finish <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">format_ISO8601</span>(<span class="fu">as.POSIXct</span>(<span class="fu">paste</span>(event_finish, retrieval_time), <span class="at">tz =</span> <span class="st">"UTC"</span>))</span>
<span id="cb23-15"><a href="#cb23-15" tabindex="-1"></a>eventDateTime_finish <span class="ot">&lt;-</span> <span class="fu">paste0</span>(eventDateTime_finish, <span class="st">"Z"</span>)</span>
<span id="cb23-16"><a href="#cb23-16" tabindex="-1"></a>eventDateTime <span class="ot">&lt;-</span> <span class="fu">paste</span>(eventDateTime_start, eventDateTime_finish, <span class="at">sep =</span> <span class="st">"/"</span>) </span>
<span id="cb23-17"><a href="#cb23-17" tabindex="-1"></a><span class="fu">print</span>(eventDate)</span>
<span id="cb23-18"><a href="#cb23-18" tabindex="-1"></a><span class="fu">print</span>(eventDateTime)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "2021-01-30/2021-01-31"
[1] "2021-01-30T10:02:00Z/2021-01-31T11:02:00Z"</code></pre>
</div>
<p>{: .solution}</p>
</li>
</ol>
</blockquote>
<blockquote>
<h2 id="tip-1">Tip</h2>
<p>When all else fails, treat the dates as strings and use
substitutions/regular expressions to manipulate the strings into ISO
8601. {: .callout}</p>
</blockquote>
</div>
<div class="section level1">
<h1 id="matching-your-scientific-names-to-worms">Matching your scientific names to WoRMS<a class="anchor" aria-label="anchor" href="#matching-your-scientific-names-to-worms"></a>
</h1>
<p>OBIS uses the <a href="https://www.marinespecies.org/" class="external-link">World Register
of Marine Species (WoRMS)</a> as the taxonomic backbone for its system.
GBIF uses the <a href="https://www.catalogueoflife.org/" class="external-link">Catalog of
Life</a>. Since WoRMS contributes to the Catalog of Life and WoRMS is a
requirement for OBIS we will teach you how to do your taxonomic lookups
using WoRMS. The key Darwin Core terms that we need from WoRMS are
<code>scientificNameID</code> also known as the WoRMS LSID which looks
something like this
<code>"urn:lsid:marinespecies.org:taxname:105838"</code> and
<code>kingdom</code> but you can grab the other parts of the taxonomic
hierarchy if you want as well as such as <code>taxonRank</code>.</p>
<p>There are two ways to grab the taxonomic information necessary.
First, you can use the <a href="https://www.marinespecies.org/aphia.php?p=match" class="external-link">WoRMS Taxon Match
Tool</a>. The tool accepts lists of scientific names (each unique name
as a separate row in a .txt, .csv, or .xlsx file) up to 1500 names and
provides an interface for selecting the match you want for ambiguous
matches. A brief walk-through using the service is included <a href="#using-the-worms-taxon-match-tool">below</a>. A more detailed
step-by-step guide on using the WoRMS Taxon Match Tool for the <a href="https://marinebon.org/p2p/" class="external-link">MBON Pole to Pole</a> can be found <a href="https://marinebon.github.io/p2p/protocols/WoRMS_quality_check.pdf" class="external-link">here</a>.
Additionally, OBIS has a three-part <a href="https://www.youtube.com/watch?v=jJ8nlMlg-cY" class="external-link">video series</a> on
YouTube about using the tool.</p>
<p>The other way to get the taxonomic information you need is to use <a href="https://cran.r-project.org/web/packages/worrms/worrms.pdf" class="external-link">worrms</a>
(yes there are two <strong>r</strong>’s in the package name) or <a href="https://github.com/iobis/pyworms" class="external-link">pyworms</a>.</p>
<table class="table">
<colgroup>
<col width="15%">
<col width="50%">
<col width="33%">
</colgroup>
<thead><tr class="header">
<th>Darwin Core Term</th>
<th>Description</th>
<th>Example</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/list/#dwc_scientificNameID" class="external-link">scientificNameID</a></td>
<td>An identifier for the nomenclatural (not taxonomic) details of a
scientific name.</td>
<td><code>urn:lsid:ipni.org:names:37829-1:1.3</code></td>
</tr>
<tr class="even">
<td><a href="https://dwc.tdwg.org/list/#dwc_kingdom" class="external-link">kingdom</a></td>
<td>The full scientific name of the kingdom in which the taxon is
classified.</td>
<td>
<code>Animalia</code>, <code>Archaea</code>, <code>Bacteria</code>,
<code>Chromista</code>, <code>Fungi</code>, <code>Plantae</code>,
<code>Protozoa</code>, <code>Viruses</code>
</td>
</tr>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/list/#dwc_taxonRank" class="external-link">taxonRank</a></td>
<td>The taxonomic rank of the most specific name in the
scientificName.</td>
<td>
<code>subspecies</code>, <code>varietas</code>, <code>forma</code>,
<code>species</code>, <code>genus</code>
</td>
</tr>
</tbody>
</table>
<blockquote>
<h2 id="using-the-worms-taxon-match-tool">Using the WoRMS Taxon Match
Tool</h2>
<ol style="list-style-type: decimal">
<li><p>Create a CSV (comma separated value) file with the scientific
name of the species of interest. Here we are showing some of the
contents of the file <a href="%7B%7B%20page.root%20%7D%7D/data/species.csv"><code>species.csv</code></a>.
<img src="%7B%7B%20page.root%20%7D%7D/fig/species_file_screenshot.png" alt="screenshot" class="figure">{: .image-with-shadow }</p></li>
<li>
<p>Upload that file to the <a href="https://www.marinespecies.org/aphia.php?p=match" class="external-link">WoRMS Taxon match
service</a></p>
<ul>
<li><strong>make sure the option LSID is checked</strong></li>
<li>
<strong>for the example file, make sure you select LineFeed as the
row delimiter and Tab as the column delimiter</strong> <img src="%7B%7B%20page.root%20%7D%7D/fig/WoRMS_upload.png" alt="screenshot" class="figure">{: .image-with-shadow }</li>
</ul>
</li>
<li><p>Identify which columns to match to which WoRMS term. <img src="%7B%7B%20page.root%20%7D%7D/fig/WoRMS_TaxonMatch_Preview.PNG" alt="screenshot" class="figure">{: .image-with-shadow }</p></li>
<li><p>Click <code>Match</code></p></li>
<li>
<p>Hopefully, a WoRMS exact match will return</p>
<ol style="list-style-type: decimal">
<li>In some cases you will have ambiguous matches. Resolve these rows by
using the pull down menu to select the appropriate match.</li>
<li>Non-matched taxa will appear in red. You will have to go back to
your source file and determine what the appropriate text should
be.<br><img src="%7B%7B%20page.root%20%7D%7D/fig/WoRMS_TaxonMatch_MatchOutput.PNG" alt="screenshot" class="figure">{: .image-with-shadow }</li>
</ol>
</li>
<li><p>Download the response as an XLS, XLSX, or text file and use the
information when building the Darwin Core file(s). The response from the
example linked above can be found <a href="%7B%7B%20page.root%20%7D%7D/data/species_matched.xlsx">here</a>. A
screenshot of the file can be seen below: <img src="%7B%7B%20page.root%20%7D%7D/fig/matched_species_screenshot.png" alt="screenshot" class="figure">{: .image-with-shadow } {: .solution}</p></li>
</ol>
</blockquote>
<blockquote>
<h2 id="using-the-worrms-r-package">Using the worrms R package</h2>
<ol style="list-style-type: decimal">
<li>
<p><a href="https://www.marinespecies.org/aphia.php?p=taxdetails&amp;id=105838" class="external-link"><em>Carcharodon
carcharias</em></a> (White shark)</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">worrms</span><span class="op">)</span></span>
<span><span class="va">worms_record</span> <span class="op">&lt;-</span> <span class="fu">worrms</span><span class="fu">::</span><span class="fu">wm_records_taxamatch</span><span class="op">(</span><span class="st">"Carcharodon carcharias"</span>, fuzzy <span class="op">=</span> <span class="cn">TRUE</span>, marine_only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">worms_record</span><span class="op">$</span><span class="va">lsid</span>;  <span class="va">worms_record</span><span class="op">$</span><span class="va">rank</span>; <span class="va">worms_record</span><span class="op">$</span><span class="va">kingdom</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "urn:lsid:marinespecies.org:taxname:105838"
[1] "Species"
[1] "Animalia"</code></pre>
</div>
</li>
</ol>
<p>{: .solution}</p>
</blockquote>
<blockquote>
<h2 id="using-the-pyworms-python-package">Using the pyworms python
package</h2>
<ol style="list-style-type: decimal">
<li>
<p>Bringing in <a href="%7B%7B%20page.root%20%7D%7D/data/species.csv"><code>species.csv</code></a>
and collecting appropriate information from WoRMS using the pyworms
package.</p>
<p><strong>Note</strong> some of the responses have multiple matches, so
the user needs to evaluate which match is appropriate.</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a><span class="im">import</span> pyworms</span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a><span class="im">import</span> pprint</span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" tabindex="-1"></a>fname <span class="op">=</span> <span class="st">'https://ioos.github.io/bio_mobilization_workshop/data/species.csv'</span></span>
<span id="cb27-6"><a href="#cb27-6" tabindex="-1"></a></span>
<span id="cb27-7"><a href="#cb27-7" tabindex="-1"></a><span class="co"># Read in the csv data to data frame</span></span>
<span id="cb27-8"><a href="#cb27-8" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(fname)</span>
<span id="cb27-9"><a href="#cb27-9" tabindex="-1"></a></span>
<span id="cb27-10"><a href="#cb27-10" tabindex="-1"></a><span class="co"># Iterate row by row through the data frame and query worms for each ScientificName term.</span></span>
<span id="cb27-11"><a href="#cb27-11" tabindex="-1"></a><span class="cf">for</span> index, row <span class="kw">in</span> df.iterrows():</span>
<span id="cb27-12"><a href="#cb27-12" tabindex="-1"></a>   resp <span class="op">=</span> pyworms.aphiaRecordsByMatchNames(row[<span class="st">'ORIGINAL_NAME'</span>], marine_only<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb27-13"><a href="#cb27-13" tabindex="-1"></a></span>
<span id="cb27-14"><a href="#cb27-14" tabindex="-1"></a>   <span class="co"># When no matches are found, print the non-matching name and move on</span></span>
<span id="cb27-15"><a href="#cb27-15" tabindex="-1"></a>   <span class="cf">if</span> <span class="bu">len</span>(resp[<span class="dv">0</span>]) <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb27-16"><a href="#cb27-16" tabindex="-1"></a>      <span class="bu">print</span>(<span class="st">'</span><span class="ch">\n</span><span class="st">No match for name "</span><span class="sc">{}</span><span class="st">"'</span>.<span class="bu">format</span>(row[<span class="st">'ORIGINAL_NAME'</span>]))</span>
<span id="cb27-17"><a href="#cb27-17" tabindex="-1"></a>      <span class="cf">continue</span></span>
<span id="cb27-18"><a href="#cb27-18" tabindex="-1"></a></span>
<span id="cb27-19"><a href="#cb27-19" tabindex="-1"></a>   <span class="co"># When more than 1 match is found, the user needs to take a look. But tell the user which one has multiple matches</span></span>
<span id="cb27-20"><a href="#cb27-20" tabindex="-1"></a>   <span class="cf">elif</span> <span class="bu">len</span>(resp[<span class="dv">0</span>]) <span class="op">&gt;</span> <span class="dv">1</span>:</span>
<span id="cb27-21"><a href="#cb27-21" tabindex="-1"></a>      <span class="bu">print</span>(<span class="st">'</span><span class="ch">\n</span><span class="st">Multiple matches for name "</span><span class="sc">{}</span><span class="st">":'</span>.<span class="bu">format</span>(row[<span class="st">'ORIGINAL_NAME'</span>]))</span>
<span id="cb27-22"><a href="#cb27-22" tabindex="-1"></a>      pprint.pprint(resp[<span class="dv">0</span>], indent<span class="op">=</span><span class="dv">4</span>)</span>
<span id="cb27-23"><a href="#cb27-23" tabindex="-1"></a>      <span class="cf">continue</span></span>
<span id="cb27-24"><a href="#cb27-24" tabindex="-1"></a></span>
<span id="cb27-25"><a href="#cb27-25" tabindex="-1"></a>   <span class="co"># When only 1 match is found, put the appropriate information into the appropriate row and column</span></span>
<span id="cb27-26"><a href="#cb27-26" tabindex="-1"></a>   <span class="cf">else</span>:</span>
<span id="cb27-27"><a href="#cb27-27" tabindex="-1"></a>      worms <span class="op">=</span> resp[<span class="dv">0</span>][<span class="dv">0</span>]</span>
<span id="cb27-28"><a href="#cb27-28" tabindex="-1"></a>      df.loc[index, <span class="st">'scientificNameID'</span>] <span class="op">=</span> worms[<span class="st">'lsid'</span>]</span>
<span id="cb27-29"><a href="#cb27-29" tabindex="-1"></a>      df.loc[index, <span class="st">'taxonRank'</span>] <span class="op">=</span> worms[<span class="st">'rank'</span>]</span>
<span id="cb27-30"><a href="#cb27-30" tabindex="-1"></a>      df.loc[index, <span class="st">'kingdom'</span>] <span class="op">=</span> worms[<span class="st">'kingdom'</span>]</span>
<span id="cb27-31"><a href="#cb27-31" tabindex="-1"></a></span>
<span id="cb27-32"><a href="#cb27-32" tabindex="-1"></a><span class="co"># print the first 10 rows</span></span>
<span id="cb27-33"><a href="#cb27-33" tabindex="-1"></a>df.head()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>No match for scientific name "Zygophylax  doris (Faxon, 1893)"

Multiple matches for scientific name "Acanthephyra brevirostris Smith, 1885"

                                 ORIGINAL_NAME                           scientificNameID taxonRank   kingdom
0              Zygophylax  doris (Faxon, 1893)                                        NaN       NaN       NaN
1       Bentheogennema intermedia (Bate, 1888)  urn:lsid:marinespecies.org:taxname:107086   Species  Animalia
2  Bentheogennema stephenseni Burkenroad, 1940  urn:lsid:marinespecies.org:taxname:377419   Species  Animalia
3       Bentheogennema pasithea (de Man, 1907)  urn:lsid:marinespecies.org:taxname:377418   Species  Animalia
4        Acanthephyra brevirostris Smith, 1885                                        NaN       NaN       NaN</code></pre>
</div>
<p>{: .solution}</p>
</li>
</ol>
</blockquote>
</div>
<div class="section level1">
<h1 id="getting-latlon-to-decimal-degrees">Getting lat/lon to decimal degrees<a class="anchor" aria-label="anchor" href="#getting-latlon-to-decimal-degrees"></a>
</h1>
<p>Latitude (<code>decimalLatitude</code>) and longitude
(<code>decimalLongitude</code>) are the geographic coordinates (in
decimal degrees north and east, respectively), using the spatial
reference system given in <code>geodeticDatum</code> of the geographic
center of a location. * <code>decimalLatitude</code>, positive values
are north of the Equator, negative values are south of it. All values
lie between -90 and 90, inclusive. * <code>decimalLongitude</code>,
positive values are east of the Greenwich Meridian, negative values are
west of it. All values lie between -180 and 180, inclusive.</p>
<p>Note, that the requirement for <code>decimalLatitude</code> and
<code>decimallLongitude</code> is they must be in decimal degrees in <a href="https://en.wikipedia.org/wiki/World_Geodetic_System" class="external-link">WGS84</a>.
Since this is the requirement for Darwin Core, <strong>OBIS and GBIF
will assume data shared using those Darwin Core terms are in the
geodetic datum <code>WGS84</code></strong>. We highly recommend checking
the coordinate reference system (CRS) of your observations to confirm
they are using the same datum and documenting it in the
<code>geodeticDatum</code> Darwin Core term. If your coordinates are not
using <code>WGS84</code>, they will need to be converted in order to
share the data to OBIS and GBIF since <code>decimalLatitude</code> and
<code>decimalLongitude</code> are required terms.</p>
<p>Helpful packages for managing CRS and geodetic datum: * python: <a href="https://geopandas.org/en/stable/getting_started.html" class="external-link">GeoPandas</a>
has a <a href="https://geopandas.org/en/stable/docs/user_guide/projections.html#re-projecting" class="external-link">utility</a>.
* R: <a href="https://cran.r-project.org/web/packages/terra/index.html" class="external-link">terra</a>
and <a href="https://cran.r-project.org/web/packages/sf/index.html" class="external-link">sf</a>.</p>
<blockquote>
<h2 id="tip-2">Tip</h2>
<p>If at all possible, it’s best to extract out the components of the
information you have in order to compile the appropriate field. For
example, if you have the coordinates as one lone string
<code>17° 51' 57.96" S 149° 39' 13.32" W</code>, try to split it out
into its component pieces: <code>17</code>, <code>51</code>,
<code>57.96</code>, <code>S</code>, <code>149</code>, <code>39</code>,
<code>13.32</code>, and <code>W</code> just be sure to track which
values are latitude and which are longitude. {: .callout}</p>
</blockquote>
<table class="table">
<colgroup>
<col width="38%">
<col width="27%">
<col width="34%">
</colgroup>
<thead><tr class="header">
<th>Darwin Core Term</th>
<th>Description</th>
<th>Example</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/list/#dwc_decimalLatitude" class="external-link">decimalLatitude</a></td>
<td>The geographic latitude (in decimal degrees, using the spatial
reference system given in geodeticDatum) of the geographic center of a
Location. Positive values are north of the Equator, negative values are
south of it. Legal values lie between -90 and 90, inclusive.</td>
<td><code>-41.0983423</code></td>
</tr>
<tr class="even">
<td><a href="https://dwc.tdwg.org/list/#dwc_decimalLongitude" class="external-link">decimalLongitude</a></td>
<td>The geographic longitude (in decimal degrees, using the spatial
reference system given in geodeticDatum) of the geographic center of a
Location. Positive values are east of the Greenwich Meridian, negative
values are west of it. Legal values lie between -180 and 180,
inclusive.</td>
<td><code>-121.1761111</code></td>
</tr>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/list/#dwc_geodeticDatum" class="external-link">geodeticDatum</a></td>
<td>The ellipsoid, geodetic datum, or spatial reference system (SRS)
upon which the geographic coordinates given in decimalLatitude and
decimalLongitude as based.</td>
<td><code>WGS84</code></td>
</tr>
</tbody>
</table>
<p><img src="https://imgs.xkcd.com/comics/coordinate_precision.png" alt="coordinate_precision" class="figure">{: .image-with-shadow } <em>Image credit:
<a href="https://xkcd.com/" class="external-link">xkcd</a></em></p>
<blockquote>
<h2 id="examples-in-python-1">Examples in Python</h2>
<ol style="list-style-type: decimal">
<li>
<code>17° 51' 57.96" S</code> <code>149° 39' 13.32" W</code>
<ul>
<li>This example assumes you have already split the two strings into
discrete components (as shown in the table). An example converting the
full strings <code>17° 51' 57.96" S</code>
<code>149° 39' 13.32" W</code> to decimal degrees can be found <a href="https://github.com/MathewBiddle/misc/blob/07d643da831255069fd1f6e936ca0902e21c0d0c/data302_DON_Oxidation_working_hollibaugh_20190514_process.py#L24-L62" class="external-link">here</a>.</li>
</ul>
<table style="width:100%;" class="table">
<colgroup>
<col width="12%">
<col width="4%">
<col width="13%">
<col width="16%">
<col width="13%">
<col width="13%">
<col width="13%">
<col width="15%">
</colgroup>
<thead><tr class="header">
<th>lat_degrees</th>
<th>lat_minutes</th>
<th>lat_seconds</th>
<th>lat_hemisphere</th>
<th>lon_degrees</th>
<th>lon_minutes</th>
<th>lon_seconds</th>
<th>lon_hemisphere</th>
</tr></thead>
<tbody><tr class="odd">
<td>17</td>
<td>51</td>
<td>57.96</td>
<td>S</td>
<td>149</td>
<td>39</td>
<td>13.32</td>
<td>W</td>
</tr></tbody>
</table>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'lat_degrees'</span>:[<span class="dv">17</span>],</span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a>                   <span class="st">'lat_minutes'</span>:[<span class="dv">51</span>],</span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a>                   <span class="st">'lat_seconds'</span>:[<span class="fl">57.96</span>],</span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a>                   <span class="st">'lat_hemisphere'</span>:[<span class="st">'S'</span>],</span>
<span id="cb29-5"><a href="#cb29-5" tabindex="-1"></a>                   <span class="st">'lon_degrees'</span>: [<span class="dv">149</span>], </span>
<span id="cb29-6"><a href="#cb29-6" tabindex="-1"></a>                   <span class="st">'lon_minutes'</span>: [<span class="dv">39</span>], </span>
<span id="cb29-7"><a href="#cb29-7" tabindex="-1"></a>                   <span class="st">'lon_seconds'</span>:[<span class="fl">13.32</span>], </span>
<span id="cb29-8"><a href="#cb29-8" tabindex="-1"></a>                   <span class="st">'lon_hemisphere'</span>: [<span class="st">'W'</span>],</span>
<span id="cb29-9"><a href="#cb29-9" tabindex="-1"></a>                  })</span>
<span id="cb29-10"><a href="#cb29-10" tabindex="-1"></a></span>
<span id="cb29-11"><a href="#cb29-11" tabindex="-1"></a>df[<span class="st">'decimalLatitude'</span>] <span class="op">=</span> df[<span class="st">'lat_degrees'</span>] <span class="op">+</span> ( (df[<span class="st">'lat_minutes'</span>] <span class="op">+</span> (df[<span class="st">'lat_seconds'</span>]<span class="op">/</span><span class="dv">60</span>) )<span class="op">/</span><span class="dv">60</span>)</span>
<span id="cb29-12"><a href="#cb29-12" tabindex="-1"></a>df[<span class="st">'decimalLongitude'</span>] <span class="op">=</span> df[<span class="st">'lon_degrees'</span>] <span class="op">+</span> ( (df[<span class="st">'lon_minutes'</span>] <span class="op">+</span> (df[<span class="st">'lon_seconds'</span>]<span class="op">/</span><span class="dv">60</span>) )<span class="op">/</span><span class="dv">60</span>)</span>
<span id="cb29-13"><a href="#cb29-13" tabindex="-1"></a></span>
<span id="cb29-14"><a href="#cb29-14" tabindex="-1"></a><span class="co"># Convert hemisphere S and W to negative values as units should be `degrees North` and `degrees East`</span></span>
<span id="cb29-15"><a href="#cb29-15" tabindex="-1"></a>df.loc[df[<span class="st">'lat_hemisphere'</span>]<span class="op">==</span><span class="st">'S'</span>,<span class="st">'decimalLatitude'</span>] <span class="op">=</span> df.loc[df[<span class="st">'lat_hemisphere'</span>]<span class="op">==</span><span class="st">'S'</span>,<span class="st">'decimalLatitude'</span>]<span class="op">*-</span><span class="dv">1</span></span>
<span id="cb29-16"><a href="#cb29-16" tabindex="-1"></a>df.loc[df[<span class="st">'lon_hemisphere'</span>]<span class="op">==</span><span class="st">'W'</span>,<span class="st">'decimalLongitude'</span>] <span class="op">=</span> df.loc[df[<span class="st">'lon_hemisphere'</span>]<span class="op">==</span><span class="st">'W'</span>,<span class="st">'decimalLongitude'</span>]<span class="op">*-</span><span class="dv">1</span></span>
<span id="cb29-17"><a href="#cb29-17" tabindex="-1"></a></span>
<span id="cb29-18"><a href="#cb29-18" tabindex="-1"></a>df[[<span class="st">'decimalLatitude'</span>,<span class="st">'decimalLongitude'</span>]]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   decimalLatitude  decimalLongitude
          -17.8661         -149.6537</code></pre>
</div>
</li>
<li>
<code>33° 22.967' N</code> <code>117° 35.321' W</code>
<ul>
<li>Similar to above, this example assumes you have already split the
two strings into discrete components (as shown in the table).</li>
</ul>
<table style="width:100%;" class="table">
<colgroup>
<col width="13%">
<col width="18%">
<col width="17%">
<col width="14%">
<col width="18%">
<col width="16%">
</colgroup>
<thead><tr class="header">
<th>lat_degrees</th>
<th>lat_dec_minutes</th>
<th>lat_hemisphere</th>
<th>lon_degrees</th>
<th>lon_dec_minutes</th>
<th>lon_hemisphere</th>
</tr></thead>
<tbody><tr class="odd">
<td>33</td>
<td>22.967</td>
<td>N</td>
<td>117</td>
<td>35.321</td>
<td>W</td>
</tr></tbody>
</table>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'lat_degrees'</span>:[<span class="dv">33</span>],</span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a>                   <span class="st">'lat_dec_minutes'</span>:[<span class="fl">22.967</span>],</span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a>                   <span class="st">'lat_hemisphere'</span>:[<span class="st">'N'</span>],</span>
<span id="cb31-4"><a href="#cb31-4" tabindex="-1"></a>                   <span class="st">'lon_degrees'</span>: [<span class="dv">117</span>], </span>
<span id="cb31-5"><a href="#cb31-5" tabindex="-1"></a>                   <span class="st">'lon_dec_minutes'</span>: [<span class="fl">35.321</span>], </span>
<span id="cb31-6"><a href="#cb31-6" tabindex="-1"></a>                   <span class="st">'lon_hemisphere'</span>: [<span class="st">'W'</span>],</span>
<span id="cb31-7"><a href="#cb31-7" tabindex="-1"></a>                  })</span>
<span id="cb31-8"><a href="#cb31-8" tabindex="-1"></a></span>
<span id="cb31-9"><a href="#cb31-9" tabindex="-1"></a>df[<span class="st">'decimalLatitude'</span>] <span class="op">=</span> df[<span class="st">'lat_degrees'</span>] <span class="op">+</span> (df[<span class="st">'lat_dec_minutes'</span>]<span class="op">/</span><span class="dv">60</span>)</span>
<span id="cb31-10"><a href="#cb31-10" tabindex="-1"></a>df[<span class="st">'decimalLongitude'</span>] <span class="op">=</span> df[<span class="st">'lon_degrees'</span>] <span class="op">+</span> (df[<span class="st">'lon_dec_minutes'</span>]<span class="op">/</span><span class="dv">60</span>)</span>
<span id="cb31-11"><a href="#cb31-11" tabindex="-1"></a></span>
<span id="cb31-12"><a href="#cb31-12" tabindex="-1"></a><span class="co"># Convert hemisphere S and W to negative values as units should be `degrees North` and `degrees East`</span></span>
<span id="cb31-13"><a href="#cb31-13" tabindex="-1"></a>df.loc[df[<span class="st">'lat_hemisphere'</span>]<span class="op">==</span><span class="st">'S'</span>,<span class="st">'decimalLatitude'</span>] <span class="op">=</span> df.loc[df[<span class="st">'lat_hemisphere'</span>]<span class="op">==</span><span class="st">'S'</span>,<span class="st">'decimalLatitude'</span>]<span class="op">*-</span><span class="dv">1</span></span>
<span id="cb31-14"><a href="#cb31-14" tabindex="-1"></a>df.loc[df[<span class="st">'lon_hemisphere'</span>]<span class="op">==</span><span class="st">'W'</span>,<span class="st">'decimalLongitude'</span>] <span class="op">=</span> df.loc[df[<span class="st">'lon_hemisphere'</span>]<span class="op">==</span><span class="st">'W'</span>,<span class="st">'decimalLongitude'</span>]<span class="op">*-</span><span class="dv">1</span></span>
<span id="cb31-15"><a href="#cb31-15" tabindex="-1"></a></span>
<span id="cb31-16"><a href="#cb31-16" tabindex="-1"></a>df[[<span class="st">'decimalLatitude'</span>,<span class="st">'decimalLongitude'</span>]]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>decimalLatitude  decimalLongitude
0        33.382783       -117.588683</code></pre>
</div>
</li>
</ol>
<p>{: .solution}</p>
</blockquote>
<blockquote>
<h2 id="examples-in-r-1">Examples in R</h2>
<ol style="list-style-type: decimal">
<li>
<p><code>17° 51' 57.96" S</code> <code>149° 39' 13.32" W</code></p>
<table style="width:100%;" class="table">
<colgroup>
<col width="12%">
<col width="4%">
<col width="13%">
<col width="16%">
<col width="13%">
<col width="13%">
<col width="13%">
<col width="15%">
</colgroup>
<thead><tr class="header">
<th>lat_degrees</th>
<th>lat_minutes</th>
<th>lat_seconds</th>
<th>lat_hemisphere</th>
<th>lon_degrees</th>
<th>lon_minutes</th>
<th>lon_seconds</th>
<th>lon_hemisphere</th>
</tr></thead>
<tbody><tr class="odd">
<td>17</td>
<td>51</td>
<td>57.96</td>
<td>S</td>
<td>149</td>
<td>39</td>
<td>13.32</td>
<td>W</td>
</tr></tbody>
</table>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">tibble</span><span class="op">)</span></span>
<span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span>lat_degrees <span class="op">=</span> <span class="fl">17</span>,</span>
<span>              lat_minutes <span class="op">=</span> <span class="fl">51</span>,</span>
<span>              lat_seconds <span class="op">=</span> <span class="fl">57.96</span>,</span>
<span>              lat_hemisphere <span class="op">=</span> <span class="st">"S"</span>,</span>
<span>              lon_degrees <span class="op">=</span> <span class="fl">149</span>,</span>
<span>              lon_minutes <span class="op">=</span> <span class="fl">39</span>, </span>
<span>              lon_seconds <span class="op">=</span> <span class="fl">13.32</span>, </span>
<span>              lon_hemisphere <span class="op">=</span> <span class="st">"W"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLatitude</span> <span class="op">&lt;-</span> <span class="va">tbl</span><span class="op">$</span><span class="va">lat_degrees</span> <span class="op">+</span> <span class="op">(</span> <span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">lat_minutes</span> <span class="op">+</span> <span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">lat_seconds</span><span class="op">/</span><span class="fl">60</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="fl">60</span> <span class="op">)</span></span>
<span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLongitude</span> <span class="op">&lt;-</span> <span class="va">tbl</span><span class="op">$</span><span class="va">lon_degrees</span> <span class="op">+</span> <span class="op">(</span> <span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">lon_minutes</span> <span class="op">+</span> <span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">lon_seconds</span><span class="op">/</span><span class="fl">60</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="fl">60</span> <span class="op">)</span></span>
<span></span>
<span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLatitude</span> <span class="op">=</span> <span class="fu">as.numeric</span><span class="op">(</span><span class="fu">as.character</span><span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLatitude</span><span class="op">)</span><span class="op">)</span><span class="op">*</span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLongitude</span> <span class="op">=</span> <span class="fu">as.numeric</span><span class="op">(</span><span class="fu">as.character</span><span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLongitude</span><span class="op">)</span><span class="op">)</span><span class="op">*</span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&gt; tbl$decimalLatitude
[1] -17.8661
&gt; tbl$decimalLongitude
[1] -149.6537</code></pre>
</div>
</li>
<li>
<p><code>33° 22.967' N</code> <code>117° 35.321' W</code></p>
<table style="width:100%;" class="table">
<colgroup>
<col width="13%">
<col width="18%">
<col width="17%">
<col width="14%">
<col width="18%">
<col width="16%">
</colgroup>
<thead><tr class="header">
<th>lat_degrees</th>
<th>lat_dec_minutes</th>
<th>lat_hemisphere</th>
<th>lon_degrees</th>
<th>lon_dec_minutes</th>
<th>lon_hemisphere</th>
</tr></thead>
<tbody><tr class="odd">
<td>33</td>
<td>22.967</td>
<td>N</td>
<td>117</td>
<td>35.321</td>
<td>W</td>
</tr></tbody>
</table>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">tibble</span><span class="op">)</span></span>
<span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span>lat_degrees <span class="op">=</span> <span class="fl">33</span>,</span>
<span>              lat_dec_minutes <span class="op">=</span> <span class="fl">22.967</span>,</span>
<span>              lat_hemisphere <span class="op">=</span> <span class="st">"N"</span>,</span>
<span>              lon_degrees <span class="op">=</span> <span class="fl">117</span>, </span>
<span>              lon_dec_minutes <span class="op">=</span> <span class="fl">35.321</span>, </span>
<span>              lon_hemisphere <span class="op">=</span> <span class="st">"W"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLatitude</span> <span class="op">&lt;-</span> <span class="va">tbl</span><span class="op">$</span><span class="va">lat_degrees</span> <span class="op">+</span> <span class="op">(</span> <span class="va">tbl</span><span class="op">$</span><span class="va">lat_dec_minutes</span><span class="op">/</span><span class="fl">60</span> <span class="op">)</span></span>
<span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLongitude</span> <span class="op">&lt;-</span> <span class="va">tbl</span><span class="op">$</span><span class="va">lon_degrees</span> <span class="op">+</span> <span class="op">(</span> <span class="va">tbl</span><span class="op">$</span><span class="va">lon_dec_minutes</span><span class="op">/</span><span class="fl">60</span> <span class="op">)</span></span>
<span></span>
<span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLongitude</span> <span class="op">=</span> <span class="fu">as.numeric</span><span class="op">(</span><span class="fu">as.character</span><span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLongitude</span><span class="op">)</span><span class="op">)</span><span class="op">*</span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&gt; tbl$decimalLatitude
[1] 33.38278
&gt; tbl$decimalLongitude
[1] -117.5887</code></pre>
</div>
</li>
<li>
<p><code>33° 22.967' N</code> <code>117° 35.321' W</code></p>
<ul>
<li>Using the <a href="https://cran.r-project.org/web/packages/measurements/measurements.pdf" class="external-link">measurements
package</a> the <code>conv_unit()</code> can work with space separated
strings for coordinates.</li>
</ul>
<table class="table">
<thead><tr class="header">
<th>lat</th>
<th>lat_hemisphere</th>
<th>lon</th>
<th>lon_hemisphere</th>
</tr></thead>
<tbody><tr class="odd">
<td>33 22.967</td>
<td>N</td>
<td>117 35.321</td>
<td>W</td>
</tr></tbody>
</table>
</li>
</ol>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span>lat <span class="op">=</span> <span class="st">"33 22.967"</span>,</span>
<span>               lat_hemisphere <span class="op">=</span> <span class="st">"N"</span>,</span>
<span>               lon <span class="op">=</span> <span class="st">"117 35.321"</span>, </span>
<span>               lon_hemisphere <span class="op">=</span> <span class="st">"W"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLongitude</span> <span class="op">=</span> <span class="fu">measurements</span><span class="fu">::</span><span class="fu">conv_unit</span><span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">lon</span>, from <span class="op">=</span> <span class="st">'deg_dec_min'</span>, to <span class="op">=</span> <span class="st">'dec_deg'</span><span class="op">)</span></span>
<span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLongitude</span> <span class="op">=</span> <span class="fu">as.numeric</span><span class="op">(</span><span class="fu">as.character</span><span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLongitude</span><span class="op">)</span><span class="op">)</span><span class="op">*</span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLatitude</span> <span class="op">=</span> <span class="fu">measurements</span><span class="fu">::</span><span class="fu">conv_unit</span><span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">lat</span>, from <span class="op">=</span> <span class="st">'deg_dec_min'</span>, to <span class="op">=</span> <span class="st">'dec_deg'</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> &gt; tbl$decimalLatitude
 [1] 33.38278
 &gt; tbl$decimalLongitude
 [1] -117.5887</code></pre>
</div>
<p>{: .solution}</p>
</blockquote>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/carpentries/workbench-template-md/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/carpentries/workbench-template-md/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/carpentries/workbench-template-md/" class="external-link">Source</a></p>
				<p><a href="https://github.com/carpentries/workbench-template-md/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.10" class="external-link">sandpaper (0.16.10)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.7" class="external-link">pegboard (0.7.7)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.5" class="external-link">varnish (1.0.5)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://carpentries.github.io/workbench-template-md/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://carpentries.github.io/workbench-template-md/aio.html",
  "identifier": "https://carpentries.github.io/workbench-template-md/aio.html",
  "dateCreated": "2024-12-19",
  "dateModified": "2024-12-19",
  "datePublished": "2024-12-19"
}

  </script><script>
		feather.replace();
	</script>
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

